---
title: (3 week Post) Puppeteer Set Cookies
Edit: 2020-07-18
mathjax: false
mermaid: false
highlight: true
status: Completed
commentable: true
tags: Puppeteer Cookies EditThisCookie page.setCookie
categories: 爬虫
description: 旧帖,迁移贴 Puppeteer Set Cookies not working
---

## 题外话

唐代 许浑《赠别》

门外若无南北路，人生应免离别苦。

# page.setCookie

使用插件 [EditThisCookie](http://www.editthiscookie.com/) 获取cookies各个项目内容

```javascript
[{
"domain": ".renren.com",
"expirationDate": 1626122968.576495,
"hostOnly": false,
"httpOnly": false,
"name": "_de",
"path": "/",
"sameSite": "unspecified",
"secure": false,
"session": false,
"storeId": "0",
"value": "xxxxxxxxx",
"id": 1
},
.........
{
"domain": "photo.renren.com",
"hostOnly": true,
"httpOnly": false,
"name": "JSESSIONID",
"path": "/",
"sameSite": "unspecified",
"secure": false,
"session": true,
"storeId": "0",
"value": "xxxxxxxxx",
"id": 17
}]
```

---

EditThisCookie中获取的cookies有些项在setCookie中没有，剔除多余项。

`sameSite <"Strict"|"Lax">`, 只能二选一

```javascript
const cookie = [
{
    "domain": ".renren.com",
    "expires": 1626122968.576495,
    "httpOnly": false,
    "name": "_de",
    "path": "/",
    "sameSite": "Lax",
    "secure": false,
    "value": "xxxxxxxxx",
},
.....
{
    "domain": "photo.renren.com",
    "httpOnly": false,
    "name": "JSESSIONID",
    "path": "/",
    "sameSite": "Lax",
    "secure": false,
    "value": "xxxxxxxxx",
}
const promise = await page.setCookie(...cookie);
```











