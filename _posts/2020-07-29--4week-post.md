---
title: (4 week Post) Charles usage
Edit: 2020-07-29
mathjax: false
mermaid: false
highlight: true
status: Completed
commentable: true
tags: Charles
categories: 爬虫
description: 旧帖 迁移贴
---

## 题外话

出自《西洲曲》

南风知我意，吹梦到西洲。

# Charles

## Charles keygen

[**Charles 4.5.1逆向工程(2)**](https://www.52pojie.cn/thread-1042815-1-1.html)

关于`Charles keygen`请查阅 四哥的文章，通杀`3.x`、`4.x`。感谢四哥指北！

### Charles keygen usage

**先决条件**

- `jdk`

直接双击`keygen.jar`启动

<div>
    <img src="https://ftp.bmp.ovh/imgs/2021/02/d4b12eb381a958e7.png" style="zoom:80%;" align='left'/>
    <br>
    <br>
    <br>
    <br>
</div>


## Charles代理端设置

### http  socks

Charles  Proxy->Proxy Setting->Proxies, enable transparent HTTP proxying

<div>
    <img src="https://ftp.bmp.ovh/imgs/2020/07/1be73d4321d7faab.png" width="40%" align="left" />
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
</div>

### https

Charles  Proxy->SSL Proxying Settings

<div>
    <img src="https://ftp.bmp.ovh/imgs/2020/07/a96c383ae03fa70f.png" align="left" width="40%" />
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
</div>

#### install Charles root certificate

Charles  Help->SSL Proxying->Install Charles Root Certificate

## 手机端的设置代理(IOS/Android)

设置 Charles 所在PC的IP地址和代理端口 8888

浏览器地址栏键入chls.pro/ssl 下载根证书 或者 Charles  Help->SSL Proxying->Save Charles Root Certificate，手动安装。

<div>
    <img src="https://ftp.bmp.ovh/imgs/2020/07/800e3390bac6702e.png" align="left" width="40%" />
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
</div>

### 注意

模拟器安装证书时候会提示设置一个PIN，PIN密码会用于锁屏。

##  android 7.0 问题

Android 7.0 开始，默认的网络安全性配置修改了，具体请阅读官方文档[网络安全性配置](https://developer.android.com/training/articles/security-config)。

网上的帖子描述了，不少的解决方法。但麻烦，除非实在没辙了，不然应该另辟蹊径。

可以通过安卓模拟器（夜神）设置代理，夜神android版本是android 5。

---

## 参考

- [Android 7.0 以上 Charles 和 Fiddler 无法抓取 HTTPS 包的解决方式](https://johnnyshieh.me/posts/android-7-capture-https-package/)
